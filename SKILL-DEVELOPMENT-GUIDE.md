# Claude Code Skill 开发标准指南

> 本文档用于指导创建标准的 Agent Skills，扩展 Claude Code 的能力。

---

## 目录

1. [概念与定义](#1-概念与定义)
2. [文件结构与格式](#2-文件结构与格式)
3. [存储位置与优先级](#3-存储位置与优先级)
4. [创建步骤](#4-创建步骤)
5. [调用方式](#5-调用方式)
6. [Skill 内容规范](#6-skill-内容规范)
7. [最佳实践](#7-最佳实践)
8. [完整示例](#8-完整示例)
9. [与其他功能的关系](#9-与其他功能的关系)
10. [限制与注意事项](#10-限制与注意事项)

---

## 1. 概念与定义

### 1.1 什么是 Skill？

**Skills** 是 Claude Code 的可扩展命令系统，允许用户创建自定义的可重用指令来扩展 Claude 的能力。

**核心特点：**
- 以 `/skill-name` 格式调用的自定义命令
- 封装专业知识、工作流程或工具集成
- 可在团队或社区中分享和重用
- 支持用户级（全局）和项目级（本地）两种作用域

### 1.2 Skill 的作用

| 作用 | 说明 |
|------|------|
| **扩展能力** | 为 Claude 添加特定领域的专业知识 |
| **标准化流程** | 将复杂工作流封装为简单命令 |
| **提高效率** | 避免重复输入相同的指令 |
| **团队协作** | 在项目中共享统一的开发规范 |
| **工具集成** | 整合外部工具和 MCP 服务器 |

### 1.3 Skill 的两种类型

```
┌─────────────────────────────────────────────────────────┐
│                    Claude Code Skills                    │
├─────────────────────────┬───────────────────────────────┤
│      用户级 Skills       │         项目级 Skills          │
│   (User-level Skills)   │    (Project-level Skills)     │
├─────────────────────────┼───────────────────────────────┤
│ 存储位置: ~/.claude/    │ 存储位置: .claude/skills/     │
│ 作用范围: 所有项目       │ 作用范围: 当前项目             │
│ 适用场景: 个人通用工具   │ 适用场景: 项目特定工作流       │
└─────────────────────────┴───────────────────────────────┘
```

### 1.4 与 Slash Commands 的关系

- **Slash Commands** (`/command`): 用户调用 Skill 的入口
- **Skill**: 定义命令行为的 Markdown 文件
- 当用户输入 `/skill-name` 时，Claude Code 会加载对应的 Skill 文件并执行其中的指令

---

## 2. 文件结构与格式

### 2.1 Skill 文件格式

Skill 文件采用 **Markdown 格式**（`.md`），包含可选的 YAML Frontmatter 头部。

### 2.2 完整文件结构

```markdown
---
# YAML Frontmatter（可选但推荐）
name: skill-name
description: 简短描述（显示在 skill 列表中）
---

# Skill 主体内容

这里编写 Claude 执行此 skill 时应遵循的指令。

## 指令说明

详细描述 skill 的行为和规则...

## 示例

提供使用示例...
```

### 2.3 Frontmatter 字段说明

| 字段 | 类型 | 必需 | 说明 |
|------|------|------|------|
| `name` | string | 否 | Skill 的唯一标识符，用于 `/name` 调用 |
| `description` | string | 推荐 | 简短描述，显示在 skill 列表和帮助中 |

**注意：**
- 如果省略 `name`，将使用文件名（不含扩展名）作为 skill 名称
- Frontmatter 使用 `---` 分隔符包裹

### 2.4 Skill 主体内容结构

Skill 主体是纯 Markdown 文本，作为系统提示词注入 Claude：

```markdown
# /skill-name

[Skill 的简要描述]

## 核心指令

[Claude 应遵循的主要规则和行为]

## 工作流程

1. 第一步
2. 第二步
3. ...

## 输出格式

[定义输出的格式要求]

## 注意事项

[限制、边界条件等]

## 示例

### 示例 1: [场景名称]
输入: ...
输出: ...
```

### 2.5 命名规范

```
文件命名格式: {skill-name}.md

推荐规则:
├── 使用小写字母
├── 使用连字符(-)分隔单词
├── 避免特殊字符和空格
├── 名称应简洁且具描述性
└── 支持命名空间: {namespace}:{skill-name}.md

示例:
├── code-review.md        → /code-review
├── git-commit.md         → /git-commit
├── zcf:feat.md           → /zcf:feat（命名空间前缀）
└── ui-design-system.md   → /ui-design-system
```

---

## 3. 存储位置与优先级

### 3.1 目录结构

```
用户主目录/
└── .claude/
    └── skills/                    ← 用户级 Skills（全局）
        ├── my-global-skill.md
        └── another-skill.md

项目根目录/
└── .claude/
    └── skills/                    ← 项目级 Skills（本地）
        ├── project-skill.md
        └── team-workflow.md
```

### 3.2 存储位置详解

| 级别 | 路径 | 作用范围 | 用途 |
|------|------|----------|------|
| **用户级** | `~/.claude/skills/` | 所有项目 | 个人通用工具、偏好设置 |
| **项目级** | `./.claude/skills/` | 当前项目 | 项目特定工作流、团队规范 |

### 3.3 优先级顺序

当同名 skill 存在于多个位置时，按以下顺序加载（高优先级优先）：

```
优先级（从高到低）：

1. 项目级 Skills   (./.claude/skills/)     ← 最高优先级
2. 用户级 Skills   (~/.claude/skills/)
3. 内置 Skills     (Claude Code 自带)      ← 最低优先级
```

**规则说明：**
- 项目级 skill 会覆盖同名的用户级 skill
- 用户级 skill 会覆盖同名的内置 skill
- 这允许项目自定义或扩展全局 skill 的行为

### 3.4 路径示例

**Windows:**
```
用户级: C:\Users\{username}\.claude\skills\
项目级: D:\projects\my-app\.claude\skills\
```

**macOS/Linux:**
```
用户级: ~/.claude/skills/
项目级: /path/to/project/.claude/skills/
```

### 3.5 项目级 Skills 的版本控制

推荐将项目级 skills 纳入 Git 版本控制：

```gitignore
# .gitignore 配置
# 提交项目级 skills
!.claude/skills/

# 但忽略本地敏感配置
.claude/settings.local.json
```

---

## 4. 创建步骤

### 4.1 快速创建流程

```bash
# 步骤 1: 创建 skills 目录（如不存在）
mkdir -p .claude/skills

# 步骤 2: 创建 skill 文件
touch .claude/skills/my-skill.md

# 步骤 3: 编辑 skill 内容（见下方模板）

# 步骤 4: 在 Claude Code 中测试
# 输入: /my-skill
```

### 4.2 Skill 文件模板

```markdown
---
name: my-skill
description: 这是一个自定义 skill 的简短描述
---

# My Skill

[Skill 的详细描述和目的]

## 指令

当用户调用此 skill 时，你应该：

1. [第一个行为/任务]
2. [第二个行为/任务]
3. [第三个行为/任务]

## 规则

- [必须遵守的规则 1]
- [必须遵守的规则 2]
- [必须遵守的规则 3]

## 输出格式

[定义输出的结构和格式]

## 示例

### 示例 1
用户输入: /my-skill [参数]
预期输出: [输出内容]
```

### 4.3 使用内置 skill-creator

Claude Code 提供内置的 `/skill-creator` 来辅助创建 skill：

```
/skill-creator
```

该命令会引导你完成：
- 确定 skill 的名称和用途
- 设计 skill 的工作流程
- 生成标准的 skill 文件

### 4.4 创建检查清单

- [ ] 文件位于正确的目录 (`.claude/skills/` 或 `~/.claude/skills/`)
- [ ] 文件扩展名为 `.md`
- [ ] 包含有意义的 `description`
- [ ] 指令清晰、具体、可执行
- [ ] 包含至少一个使用示例
- [ ] 测试 skill 是否按预期工作

---

## 5. 调用方式

### 5.1 基本调用语法

```
/skill-name [可选参数]
```

### 5.2 调用示例

```bash
# 无参数调用
/code-review

# 带参数调用
/code-review src/main.ts

# 带选项调用
/git-commit --emoji

# 命名空间调用
/zcf:feat my-feature
```

### 5.3 参数传递

Skill 可以接收用户输入的参数，这些参数会作为上下文传递给 Claude：

```
/skill-name arg1 arg2 --option value
```

在 skill 指令中，可以引用这些参数：

```markdown
## 指令

当用户调用此 skill 时：
1. 分析用户提供的参数
2. 根据参数执行相应操作
3. 如果没有提供参数，询问用户需要什么
```

### 5.4 调用上下文

当 skill 被调用时，Claude 可以访问：

| 上下文 | 说明 |
|--------|------|
| **用户参数** | `/skill-name` 后面的文本 |
| **当前文件** | IDE 中打开/选中的文件 |
| **项目根目录** | 当前工作目录 |
| **对话历史** | 之前的对话内容 |
| **可用工具** | Read, Glob, Grep, Bash 等 |

### 5.5 与 Skill 工具的关系

Claude Code 内部使用 `Skill` 工具来执行 skills：

```
用户输入: /my-skill 参数
     ↓
Claude Code 识别 slash command
     ↓
调用 Skill 工具: skill="my-skill", args="参数"
     ↓
加载 .claude/skills/my-skill.md
     ↓
将 skill 内容注入系统提示词
     ↓
Claude 按照 skill 指令执行
```

---

## 6. Skill 内容规范

### 6.1 推荐的章节结构

```markdown
# /skill-name

[一句话描述 skill 的用途]

## 概述
[详细说明 skill 的目的和适用场景]

## 核心指令
[Claude 必须遵循的主要行为规则]

## 工作流程
[执行步骤的详细说明]

## 输入参数
[描述 skill 接受的参数]

## 输出格式
[定义输出的结构]

## 示例
[提供具体的使用示例]

## 注意事项
[边界条件、限制、警告等]
```

### 6.2 指令编写原则

**清晰性：**
- 使用简洁、明确的语言
- 避免模糊的描述
- 提供具体的行为指引

**结构化：**
- 使用编号列表表示顺序步骤
- 使用无序列表表示并列项
- 使用表格整理复杂信息

**可执行性：**
- 每条指令都应可直接执行
- 避免抽象的概念描述
- 提供判断条件和分支处理

### 6.3 示例编写规范

```markdown
## 示例

### 示例 1: [场景名称]

**用户输入:**
```
/skill-name 具体参数
```

**预期行为:**
1. Claude 首先...
2. 然后...
3. 最后...

**输出示例:**
```
[具体的输出内容]
```
```

### 6.4 指令强度等级

| 关键词 | 强度 | 用途 |
|--------|------|------|
| **必须/MUST** | 强制 | 不可违反的核心规则 |
| **应该/SHOULD** | 推荐 | 默认行为，特殊情况可调整 |
| **可以/MAY** | 可选 | 视情况决定 |
| **禁止/MUST NOT** | 禁止 | 绝对不能做的事 |

---

## 7. 最佳实践

### 7.1 命名最佳实践

```
✅ 推荐:
├── code-review        (清晰、描述性)
├── git-commit         (动词-名词 结构)
├── api-docs-gen       (简洁缩写)
└── zcf:workflow       (命名空间前缀)

❌ 避免:
├── do-stuff           (太模糊)
├── mySkill123         (大小写混乱)
├── skill_for_doing_x  (使用下划线)
└── a                  (无意义)
```

### 7.2 内容组织最佳实践

1. **保持专注**：每个 skill 只做一件事
2. **适当长度**：指令不宜过长，建议 < 2000 字
3. **层次清晰**：使用 Markdown 标题组织内容
4. **示例充分**：提供 2-3 个典型使用示例

### 7.3 指令编写最佳实践

```markdown
✅ 好的指令:
"当用户请求代码审查时，首先读取目标文件，然后检查以下方面：
1. 代码风格是否符合项目规范
2. 是否存在潜在的 bug
3. 性能是否可以优化"

❌ 差的指令:
"帮用户审查代码"
```

### 7.4 安全最佳实践

- **不存储敏感信息**：API 密钥、密码等不应写入 skill 文件
- **验证用户输入**：对参数进行基本校验
- **限制权限范围**：仅请求必要的工具和文件访问
- **明确边界**：在 skill 中声明不处理的情况

### 7.5 维护最佳实践

- **版本控制**：将项目级 skills 提交到 Git
- **文档更新**：skill 行为变更时同步更新文档
- **定期审计**：检查 skills 是否仍然适用
- **收集反馈**：根据使用体验优化 skill

---

## 8. 完整示例

### 8.1 示例：代码审查 Skill

**文件：** `.claude/skills/code-review.md`

```markdown
---
name: code-review
description: AI 驱动的代码审查，识别问题并提供改进建议
---

# /code-review

智能代码审查工具，分析代码质量、安全性和最佳实践。

## 概述

此 skill 对指定的代码文件进行全面审查，包括：
- 代码质量和可读性
- 潜在的 bug 和错误
- 安全漏洞
- 性能优化机会
- 最佳实践建议

## 工作流程

当用户调用此 skill 时：

1. **获取目标文件**
   - 如果用户指定了文件路径，读取该文件
   - 如果没有指定，检查 IDE 当前打开的文件
   - 如果都没有，询问用户要审查哪个文件

2. **分析代码**
   - 识别编程语言
   - 检查代码风格和格式
   - 查找潜在问题

3. **生成报告**
   - 按严重程度分类问题
   - 提供具体的改进建议
   - 给出修复代码示例

## 输出格式

```
## 代码审查报告

**文件:** [文件路径]
**语言:** [编程语言]
**总体评分:** [A/B/C/D/F]

### 🔴 严重问题
[列出严重问题...]

### 🟡 警告
[列出警告...]

### 🔵 建议
[列出改进建议...]

### 📝 总结
[整体评价和主要改进方向]
```

## 示例

### 示例 1: 审查指定文件
```
/code-review src/utils/auth.ts
```

### 示例 2: 审查当前文件
```
/code-review
```
```

### 8.2 示例：Git 提交 Skill

**文件：** `.claude/skills/git-commit.md`

```markdown
---
name: git-commit
description: 分析更改并生成规范的 commit 信息
---

# /git-commit

自动生成符合 Conventional Commits 规范的提交信息。

## 核心指令

当用户调用此 skill 时：

1. 运行 `git status` 查看当前更改
2. 运行 `git diff` 分析具体变更内容
3. 根据更改类型生成 commit 类型前缀
4. 编写简洁准确的 commit 信息
5. 询问用户确认后执行提交

## Commit 类型

| 类型 | 说明 |
|------|------|
| feat | 新功能 |
| fix | Bug 修复 |
| docs | 文档变更 |
| style | 代码格式（不影响功能） |
| refactor | 重构 |
| perf | 性能优化 |
| test | 测试相关 |
| chore | 构建/工具变更 |

## 输出格式

```
类型(范围): 简短描述

- 详细变更 1
- 详细变更 2

🤖 Generated with Claude Code
```

## 示例

### 示例 1: 默认提交
```
/git-commit
```
输出: `feat(auth): 添加用户登录功能`

### 示例 2: 带 emoji 提交
```
/git-commit --emoji
```
输出: `✨ feat(auth): 添加用户登录功能`
```

---

## 9. 与其他功能的关系

### 9.1 Claude Code 功能生态

```
┌─────────────────────────────────────────────────────────────┐
│                    Claude Code 核心                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌───────────────┐    ┌───────────────┐    ┌─────────────┐ │
│  │    Skills     │    │    Hooks      │    │     MCP     │ │
│  │  /slash-cmd   │    │  事件触发器    │    │  外部工具    │ │
│  └───────┬───────┘    └───────┬───────┘    └──────┬──────┘ │
│          │                    │                   │         │
│          └────────────────────┼───────────────────┘         │
│                               ↓                             │
│                    ┌─────────────────────┐                  │
│                    │   Claude AI 执行    │                  │
│                    └─────────────────────┘                  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 9.2 Skills vs Hooks

| 特性 | Skills | Hooks |
|------|--------|-------|
| **触发方式** | 用户显式调用 `/command` | 事件自动触发 |
| **交互性** | 支持对话交互 | 通常静默执行 |
| **用途** | 定义 AI 行为 | 自动化流程 |
| **文件格式** | Markdown | Shell/脚本 |

**组合使用示例：**
- Hook 在代码保存时触发 → 调用 `/lint` skill 进行检查

### 9.3 Skills vs MCP

| 特性 | Skills | MCP |
|------|--------|-----|
| **功能** | 定义 AI 行为和指令 | 提供外部工具能力 |
| **实现** | Markdown 文本 | 服务器程序 |
| **扩展性** | 行为扩展 | 能力扩展 |

**组合使用示例：**
- Skill 指令调用 MCP 提供的数据库查询工具

### 9.4 Skills 与 CLAUDE.md

| 特性 | Skills | CLAUDE.md |
|------|--------|-----------|
| **范围** | 特定命令 | 全局项目上下文 |
| **调用** | `/skill-name` 显式调用 | 自动加载 |
| **内容** | 行为指令 | 项目说明、规范 |

**组合使用：**
- CLAUDE.md 定义项目整体规范
- Skills 定义具体操作命令

---

## 10. 限制与注意事项

### 10.1 技术限制

| 限制类型 | 说明 | 建议 |
|----------|------|------|
| **文件大小** | Skill 文件建议 < 50KB | 拆分为多个相关 skills |
| **命令名称** | 建议 < 30 字符 | 使用简洁有意义的名称 |
| **执行时间** | 长任务需考虑超时 | 提供进度反馈 |
| **嵌套深度** | Skill 不应调用其他 skill | 保持独立性 |

### 10.2 权限限制

Skills 受项目权限配置约束：
- Bash 命令需要在 settings 中允许
- 文件访问受项目边界限制
- 某些危险操作需要用户确认

### 10.3 命名限制

```
✅ 允许:
├── 小写字母 (a-z)
├── 数字 (0-9)
├── 连字符 (-)
└── 冒号 (:) 用于命名空间

❌ 禁止:
├── 空格
├── 下划线 (_)
├── 特殊字符 (!@#$%^&*)
└── 中文字符
```

### 10.4 安全注意事项

1. **不要在 skill 中存储敏感信息**
   - API 密钥、密码、令牌等
   - 使用环境变量或安全存储

2. **验证用户输入**
   - 不直接执行用户提供的代码
   - 对路径参数进行校验

3. **限制权限范围**
   - 仅请求必要的工具访问
   - 避免过度宽泛的文件操作

4. **代码审计**
   - 定期检查 skill 内容
   - 审查团队成员提交的 skills

### 10.5 兼容性

| 平台 | 支持状态 |
|------|----------|
| Windows | ✅ 完全支持 |
| macOS | ✅ 完全支持 |
| Linux | ✅ 完全支持 |
| VS Code 扩展 | ✅ 支持 |
| JetBrains IDE | ✅ 支持 |

### 10.6 常见问题排查

| 问题 | 可能原因 | 解决方案 |
|------|----------|----------|
| Skill 不显示 | 文件位置错误 | 检查是否在 `.claude/skills/` |
| 调用无响应 | 语法错误 | 检查 YAML frontmatter 格式 |
| 行为不符预期 | 指令不清晰 | 重写为更具体的指令 |
| 权限被拒 | 设置限制 | 检查 settings.local.json |

---

## 附录

### A. Skill 模板文件

**基础模板 - 适用于简单 skill：**

```markdown
---
name: my-skill
description: 简短描述
---

# /my-skill

[一句话说明用途]

## 指令

当调用此 skill 时，你必须：

1. [步骤 1]
2. [步骤 2]
3. [步骤 3]

## 示例

/my-skill 参数
```

**完整模板 - 适用于复杂 skill：**

```markdown
---
name: advanced-skill
description: 详细描述此 skill 的功能
---

# /advanced-skill

[详细说明此 skill 的用途和价值]

## 概述

此 skill 用于 [具体场景]，能够帮助用户 [达成目标]。

## 核心指令

你必须遵循以下规则：
- 规则 1
- 规则 2
- 规则 3

## 工作流程

1. **阶段一：准备**
   - 子步骤 1.1
   - 子步骤 1.2

2. **阶段二：执行**
   - 子步骤 2.1
   - 子步骤 2.2

3. **阶段三：收尾**
   - 子步骤 3.1

## 输入参数

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| file | path | 否 | 目标文件路径 |
| --verbose | flag | 否 | 显示详细输出 |

## 输出格式

```
[定义输出的结构模板]
```

## 示例

### 示例 1: [场景名称]
输入: `/advanced-skill arg1`
行为: [描述预期行为]

### 示例 2: [场景名称]
输入: `/advanced-skill arg1 --verbose`
行为: [描述预期行为]

## 注意事项

- 边界条件 1
- 边界条件 2
```

### B. 常用工具列表

Claude Code 中 skill 可以使用的工具：

| 工具 | 说明 | 用途 |
|------|------|------|
| **Read** | 读取文件内容 | 查看代码、配置文件 |
| **Glob** | 文件模式匹配 | 查找文件 |
| **Grep** | 正则表达式搜索 | 搜索代码内容 |
| **Bash** | 执行 shell 命令 | 运行构建、测试等 |
| **Edit** | 编辑文件 | 修改代码 |
| **Write** | 写入文件 | 创建新文件 |
| **Task** | 启动子代理 | 复杂任务分解 |
| **TodoWrite** | 任务管理 | 跟踪进度 |

### C. 参考资源

**官方文档：**
- Claude Code Skills: https://code.claude.com/docs/en/skills
- Claude Code 完整文档: https://code.claude.com/docs/

**相关功能：**
- Hooks: https://code.claude.com/docs/en/hooks
- MCP: https://code.claude.com/docs/en/mcp
- 权限配置: https://code.claude.com/docs/en/settings

**社区资源：**
- GitHub Issues: https://github.com/anthropics/claude-code/issues
- Skills 示例仓库: (待补充)

